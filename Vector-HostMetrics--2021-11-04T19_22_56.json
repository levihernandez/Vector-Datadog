{"title":"Vector - Host Metrics","description":"## Vector Metrics\n\nShow metrics collected from hosts via Vector. To get started with Vector metrics collection proceed to the following:\n\n* Install Vector in your host via [cURL](https://vector.dev/docs/setup/installation/#installation-script)\n* Create a Vector TOML config file `host_metrics.toml`\n* Execute the collection with `$ vector --config host_metrics.toml`\n\n### TOM Config Simplified Sample\n\nThe current TOML consists of a Vector `source` and `sink` only. To expand transformation capabilities see [Vector Metrics](https://vector.dev/docs/about/under-the-hood/architecture/data-model/metric/)\n\n> file: `host_metrics.toml`\n\n```yaml\n[sources.my_source_id]\ntype = \"host_metrics\"\ncollectors = [ \"cpu\",\"memory\",\"disk\",\"network\",\"filesystem\" ]\nscrape_interval_secs = 15\n\n[sinks.my_sink_id]\ntype = \"datadog_metrics\"\ninputs = [ \"my_source_id\" ]\napi_key = \"${DD-API-KEY}\"\ndefault_namespace = \"service\"\n```","widgets":[{"id":2610901706580412,"definition":{"title":"Memory","type":"group","background_color":"vivid_green","show_title":true,"layout_type":"ordered","widgets":[{"id":883253837312434,"definition":{"title":"Host Total Memory","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:host.memory_total_bytes{*}","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":3927715591620320,"definition":{"title":"Host Total Available Memory","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:host.memory_available_bytes{*}","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":2,"y":0,"width":2,"height":2}},{"id":5127695024250880,"definition":{"title":"Host Total Used Memory","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:host.memory_used_bytes{*}","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":4,"y":0,"width":2,"height":2}},{"id":796538586088415,"definition":{"title":"host.memory_used_bytes","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"q":"avg:host.memory_used_bytes{*}","display_type":"line"}]},"layout":{"x":0,"y":2,"width":3,"height":2}},{"id":6977883068908192,"definition":{"title":"Host Memory","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:host.memory_total_bytes{*}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"formula":"query0"}],"queries":[{"data_source":"metrics","name":"query0","query":"avg:host.memory_used_bytes{*}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":3,"y":2,"width":3,"height":2}}]},"layout":{"x":0,"y":0,"width":6,"height":5}},{"id":8798713293548948,"definition":{"title":"CPU","type":"group","background_color":"vivid_blue","show_title":true,"layout_type":"ordered","widgets":[{"id":561155517761132,"definition":{"title":"CPUs","title_size":"16","title_align":"left","time":{},"type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:host.cpu_seconds_total{$host} by {cpu}.as_count()","aggregator":"avg"}],"response_format":"scalar"}]},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":7801569759618940,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:host.cpu_seconds_total{*} by {cpu}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"formulas":[{"formula":"query0"}],"queries":[{"data_source":"metrics","name":"query0","query":"avg:host.cpu_seconds_total{*}.as_count()"}],"response_format":"timeseries","style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":3,"y":0,"width":3,"height":2}}]},"layout":{"x":6,"y":0,"width":6,"height":3}},{"id":4826953532963420,"definition":{"title":"Network","type":"group","background_color":"vivid_purple","show_title":true,"layout_type":"ordered","widgets":[{"id":5348367302681256,"definition":{"title":"Host Total Network Packets Sent","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:host.network_transmit_packets_total{*}.as_count()","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":4386405075596636,"definition":{"title":"Host Total Network Packets Received","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:host.network_receive_packets_total{*}.as_count()","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":2,"y":0,"width":2,"height":2}},{"id":7622309786369540,"definition":{"title":"Host Total Network Packets Dropped","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:host.network_transmit_packets_drop_total{*}.as_count()","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":4,"y":0,"width":2,"height":2}}]},"layout":{"x":6,"y":3,"width":6,"height":3}},{"id":887228977566262,"definition":{"title":"Disk","type":"group","background_color":"vivid_pink","show_title":true,"layout_type":"ordered","widgets":[{"id":3269025600065932,"definition":{"title":"Total Disk Reads","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:host.disk_read_bytes_total{$host}.as_count()","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":0,"y":0,"width":3,"height":2}},{"id":7913856148344162,"definition":{"title":"Total Disk Writes","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:host.disk_written_bytes_total{$host}.as_count()","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":3,"y":0,"width":3,"height":2}},{"id":7235715680088304,"definition":{"title":"Total Disk Reads Completed","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:host.disk_reads_completed_total{$host}.as_count()","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":0,"y":2,"width":3,"height":2}},{"id":453890992501336,"definition":{"title":"Total Disk Writes Completed","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:host.disk_writes_completed_total{$host}.as_count()","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":3,"y":2,"width":3,"height":2}},{"id":1261930696273116,"definition":{"title":"","title_size":"16","title_align":"left","time":{},"type":"query_table","requests":[{"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:host.disk_writes_completed_total{*} by {collector,device,host}.as_count()","aggregator":"avg"}],"response_format":"scalar"}]},"layout":{"x":0,"y":4,"width":6,"height":3}},{"id":632092992606354,"definition":{"title":"","title_size":"16","title_align":"left","time":{},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:host.disk_written_bytes_total{*}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":7,"width":6,"height":2}}]},"layout":{"x":0,"y":5,"width":6,"height":10}},{"id":1899855703374204,"definition":{"title":"Filesystem","type":"group","background_color":"vivid_orange","show_title":true,"layout_type":"ordered","widgets":[{"id":1068447845643794,"definition":{"title":"Total Filesystem Bytes","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:host.filesystem_total_bytes{*}","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":4321960936896094,"definition":{"title":"Total Filesystem Used Bytes","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:host.filesystem_used_bytes{*}","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":2,"y":0,"width":2,"height":2}},{"id":4290304753331764,"definition":{"title":"Total Filesystem Free Bytes","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:host.filesystem_free_bytes{*}","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":4,"y":0,"width":2,"height":2}},{"id":8357627249745176,"definition":{"title":"Filesystem Used Bytes","title_size":"16","title_align":"left","time":{},"type":"query_table","requests":[{"formulas":[{"conditional_formats":[],"cell_display_mode":"bar","formula":"query1","limit":{"count":500,"order":"desc"}}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:host.filesystem_used_bytes{*} by {mountpoint,filesystem,device}","aggregator":"avg"}],"response_format":"scalar"}],"has_search_bar":"auto"},"layout":{"x":0,"y":2,"width":6,"height":4}},{"id":6219782823347524,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:host.filesystem_used_bytes{$host} by {filesystem}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":6,"width":6,"height":2}}]},"layout":{"x":6,"y":6,"width":6,"height":9}}],"template_variables":[{"name":"host","default":"*","prefix":"host","available_values":[]}],"layout_type":"ordered","is_read_only":false,"notify_list":[],"reflow_type":"fixed","id":"nnt-xt2-gdg"}